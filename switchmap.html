<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    button{
        margin: 20px;
    }
</style>
<body>
    <h2>Open your console on the side and work on the buttons ðŸ”¥</h2>
    
    <button onclick="emitNext()">Click me to emit next val!</button>

    <button onclick="complete()">Click me to complete observable</button>

    <script src="https://unpkg.com/rxjs@^7/dist/bundles/rxjs.umd.min.js"></script>
    <script>
        obs1$ = new rxjs.Subject()

        buffer = ['a','b','c','d','e']
        i = 0;
        function emitNext(){
            if(i < buffer.length)
                obs1$.next(buffer[i++])
            else
                complete()
        }

        function complete(){
            obs1$.complete()
        }

        obs1$.pipe(
            /*
            The switchMap operator in RxJS is a higher-order mapping operator that projects each source value to an observable, which is then merged into the output observable. The key feature of switchMap is its "cancellation effect": it automatically unsubscribes from the previous inner observable and subscribes to the new one whenever the source observable emits a new value. 
            */
            rxjs.switchMap(c =>{
                return rxjs.interval(1000).pipe(
                    rxjs.map(i => `${c} : ${i}`),
                    rxjs.take(10)
                )
            })
        ).subscribe(console.log)
    </script>
</body>
</html>