<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    button{
        margin: 20px;
    }
</style>
<body>
    
    <h2>Open your console on the side and work on the buttons ðŸ”¥</h2>

    <button onclick="emitNext()">Click me to emit next val!</button>

    <button onclick="complete()">Click me to complete observable</button>

    <script src="https://unpkg.com/rxjs@^7/dist/bundles/rxjs.umd.min.js"></script>
    <script>
        obs1$ = new rxjs.Subject()

        buffer = ['a','b','c','d','e']
        i = 0;
        function emitNext(){
            if(i < buffer.length)
                obs1$.next(buffer[i++])
            else
                complete()
        }

        function complete(){
            obs1$.complete()
        }

        obs1$.pipe(
            /*
            Unlike concatMap which processes inner observables sequentially, mergeMap runs them in parallel. mergeMap maps each value from a source observable to a new "inner" observable, subscribes to all of these inner observables immediately, and then merges their output into a single stream.

            Press on emit value twice, and watch how output streams will get interleaved.
            */
            rxjs.mergeMap(c =>{
                return rxjs.interval(1000).pipe(
                    rxjs.map(i => `${c} : ${i}`),
                    rxjs.take(10)  //after taking 10 automatically calls complete
            )})
        ).subscribe(console.log)
    </script>
</body>
</html>