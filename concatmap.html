<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    button{
        margin: 20px;
    }
</style>
<body>
    <h2>Open your console on the side and work on the buttons ðŸ”¥</h2>
        
    <button onclick="emitNext()">Click me to emit next val!</button>

    <button onclick="complete()">Click me to complete observable</button>

    <script src="https://unpkg.com/rxjs@^7/dist/bundles/rxjs.umd.min.js"></script>
    <script>
        obs1$ = new rxjs.Subject()

        buffer = ['a','b','c','d','e']
        i = 0;
        function emitNext(){
            if(i < buffer.length)
                obs1$.next(buffer[i++])
            else
                complete()
        }

        function complete(){
            obs1$.complete()
        }

        obs1$.pipe(
            /*
            concatMap is a higher-order mapping operator that processes a stream of observables sequentially. It maps each value from a source observable to a new "inner" observable, subscribes to it, and waits for that inner observable to complete before moving on to the next value from the source

            Press on emit value twice, and watch how output streams will wait and come one after the other.

            (see MergeMap for slightly different behaviour)
            */

            rxjs.concatMap(c =>{
                return rxjs.interval(1000).pipe(
                    rxjs.map(i => `${c} : ${i}`),
                    rxjs.take(10)
            )})
        ).subscribe(console.log)
    </script>
</body>
</html>